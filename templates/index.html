<!DOCTYPE html>
<html class="dark">
<head>
    <title>FP&A Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'sf': ['-apple-system', 'BlinkMacSystemFont', 'San Francisco', 'Helvetica Neue', 'sans-serif']
                    },
                    colors: {
                        'startup-purple': '#8B5CF6',
                        'startup-blue': '#3B82F6',
                        'startup-pink': '#EC4899'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-white dark:bg-black min-h-screen font-sf transition-colors duration-200">
    <!-- Gradient Background -->
    <div class="fixed inset-0 bg-gradient-to-br from-startup-purple/5 via-startup-blue/5 to-startup-pink/5 dark:from-startup-purple/10 dark:via-startup-blue/10 dark:to-startup-pink/10 pointer-events-none"></div>

    <!-- Floating Elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
        <div class="absolute w-96 h-96 bg-startup-purple/10 dark:bg-startup-purple/20 rounded-full blur-3xl -top-48 -left-48 animate-pulse"></div>
        <div class="absolute w-96 h-96 bg-startup-blue/10 dark:bg-startup-blue/20 rounded-full blur-3xl -bottom-48 -right-48 animate-pulse delay-1000"></div>
    </div>

    <div class="relative max-w-5xl mx-auto p-8">
        <!-- Header -->
        <nav class="flex justify-between items-center mb-12">
            <div class="flex items-center space-x-2">
                <div class="bg-gradient-to-r from-startup-purple to-startup-blue rounded-lg p-2">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                    </svg>
                </div>
                <span class="text-2xl font-bold bg-gradient-to-r from-startup-purple to-startup-blue text-transparent bg-clip-text">FP&A AI</span>
            </div>

            <button id="themeToggle" class="p-2 rounded-lg bg-gray-100 hover:bg-gray-200 dark:bg-gray-800/50 dark:hover:bg-gray-700/50 backdrop-blur-sm transition-all">
                <svg class="w-6 h-6 text-gray-600 dark:text-gray-200" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path class="sun hidden dark:block" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                    <path class="moon dark:hidden" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"/>
                </svg>
            </button>
        </nav>

        <!-- Metrics Cards -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
            <div class="bg-white/80 dark:bg-gray-800/40 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 p-6 rounded-2xl hover:transform hover:scale-105 transition-all duration-300">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="text-gray-600 dark:text-gray-400 text-sm font-medium">Revenue</h3>
                        <p class="text-gray-900 dark:text-white text-3xl font-bold mt-1">$0</p>
                    </div>
                    <span class="bg-green-100 dark:bg-green-500/10 text-green-600 dark:text-green-400 text-xs px-2 py-1 rounded-full">--</span>
                </div>
                <div class="mt-4 flex space-x-2">
                    <div class="h-1 flex-1 bg-green-100 dark:bg-green-500/20 rounded-full overflow-hidden">
                        <div class="h-full w-0 bg-green-500 rounded-full"></div>
                    </div>
                </div>
            </div>

            <div class="bg-white/80 dark:bg-gray-800/40 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 p-6 rounded-2xl hover:transform hover:scale-105 transition-all duration-300">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="text-gray-600 dark:text-gray-400 text-sm font-medium">Burn Rate</h3>
                        <p class="text-gray-900 dark:text-white text-3xl font-bold mt-1">$0</p>
                    </div>
                    <span class="bg-yellow-100 dark:bg-yellow-500/10 text-yellow-600 dark:text-yellow-400 text-xs px-2 py-1 rounded-full">--</span>
                </div>
                <div class="mt-4 flex space-x-2">
                    <div class="h-1 flex-1 bg-yellow-100 dark:bg-yellow-500/20 rounded-full overflow-hidden">
                        <div class="h-full w-0 bg-yellow-500 rounded-full"></div>
                    </div>
                </div>
            </div>

            <div class="bg-white/80 dark:bg-gray-800/40 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 p-6 rounded-2xl hover:transform hover:scale-105 transition-all duration-300">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="text-gray-600 dark:text-gray-400 text-sm font-medium">Runway</h3>
                        <p class="text-gray-900 dark:text-white text-3xl font-bold mt-1">0 mo</p>
                    </div>
                    <span class="bg-blue-100 dark:bg-blue-500/10 text-blue-600 dark:text-blue-400 text-xs px-2 py-1 rounded-full">--</span>
                </div>
                <div class="mt-4 flex space-x-2">
                    <div class="h-1 flex-1 bg-blue-100 dark:bg-blue-500/20 rounded-full overflow-hidden">
                        <div class="h-full w-0 bg-blue-500 rounded-full"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Query Interface -->
        <div class="bg-white/80 dark:bg-gray-800/40 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 rounded-2xl p-8 shadow-xl">
            <h2 class="text-xl font-semibold text-gray-900 dark:text-white mb-6">Ask your FP&A Assistant</h2>
            <textarea id="query"
                class="w-full p-4 bg-gray-50 dark:bg-gray-900/50 border border-gray-200/50 dark:border-gray-700/50 rounded-xl resize-none focus:ring-2 focus:ring-startup-purple text-gray-900 dark:text-gray-200 placeholder-gray-500"
                rows="4"
                placeholder="Ask about revenue projections, department budgets, runway analysis..."></textarea>

            <button onclick="sendQuery()"
                class="mt-4 w-full bg-gradient-to-r from-startup-purple to-startup-blue text-white py-3 px-4 rounded-xl transition-all hover:opacity-90 font-medium flex items-center justify-center space-x-2">
                <span>Analyze</span>
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                </svg>
            </button>
        </div>

        <!-- Response Area -->
        <div id="response" class="mt-8 bg-white/80 dark:bg-gray-800/40 backdrop-blur-xl border border-gray-200/50 dark:border-gray-700/50 rounded-2xl p-8 hidden">
            <div class="flex items-center space-x-3 mb-4">
                <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                <h3 class="text-gray-700 dark:text-gray-300 font-medium">Analysis Result</h3>
            </div>
            <p id="responseText" class="text-gray-800 dark:text-gray-200 leading-relaxed"></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const html = document.documentElement;
            const themeToggle = document.getElementById('themeToggle');

            // Check system preference
            if (window.matchMedia('(prefers-color-scheme: light)').matches) {
                html.classList.remove('dark');
            }

            themeToggle.addEventListener('click', () => {
                html.classList.toggle('dark');
            });

            // Animate cards on load
            gsap.from('.grid > div', {
                y: 20,
                opacity: 0,
                duration: 0.8,
                stagger: 0.2,
                ease: 'power3.out'
            });
        });

        async function sendQuery() {
            const query = document.getElementById('query').value;
            const responseDiv = document.getElementById('response');
            const responseText = document.getElementById('responseText');

            responseDiv.classList.remove('hidden');
            responseText.textContent = 'Analyzing...';

            try {
                const response = await fetch('/query', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ query }),
                });

                const data = await response.json();
                if (response.ok) {
                    gsap.to(responseText, {
                        opacity: 0,
                        duration: 0.3,
                        onComplete: () => {
                            responseText.textContent = data.response;
                            gsap.to(responseText, {
                                opacity: 1,
                                duration: 0.3
                            });
                        }
                    });
                } else {
                    responseText.textContent = `Error: ${data.error}`;
                }
            } catch (error) {
                responseText.textContent = `Error: ${error.message}`;
            }
        }
    </script>
</body>
</html>